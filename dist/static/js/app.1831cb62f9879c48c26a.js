webpackJsonp([1],{116:function(e,t){},117:function(e,t){},118:function(e,t){},123:function(e,t,a){a(118);var n=a(28)(a(75),a(127),null,null);e.exports=n.exports},124:function(e,t,a){a(116);var n=a(28)(a(76),a(125),"data-v-0761e65c",null);e.exports=n.exports},125:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("Game")],1)},staticRenderFns:[]}},126:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticStyle:{"margin-top":"1%"},attrs:{id:"app"}},[a("router-view")],1)},staticRenderFns:[]}},127:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticStyle:{"margin-bottom":"5%","text-align":"center"},attrs:{id:"gameScreen"}},[a("div",{staticClass:"top-bar"},[a("md-layout",{attrs:{flex:"100"}},[a("md-layout",{attrs:{flex:"100"}},[a("div",{staticClass:"input-container",staticStyle:{"margin-top":"20px"}},[a("label",[e._v("HERO")]),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.hero,expression:"hero"}],staticStyle:{cursor:"pointer"},attrs:{type:"text",readonly:e.isFindingAvatar,tabindex:"1"},domProps:{value:e.hero},on:{input:function(t){t.target.composing||(e.hero=t.target.value)}}})])]),e._v(" "),a("md-layout",{attrs:{"md-align":"center"}},[a("button",{staticClass:"battle-button",staticStyle:{cursor:"pointer"},attrs:{type:"button",disabled:e.isFindingAvatar||!e.hero||!e.enemy,tabindex:"3"},on:{click:e.find}},[e._v("\n          "+e._s(e.isFindingAvatar?"Battle in progress":"Start Battle")+"\n        ")]),e._v(" "),a("button",{staticClass:"button",staticStyle:{cursor:"pointer"},attrs:{type:"button",disabled:e.isFindingAvatar||!e.hero,tabindex:"4"},on:{click:e.findFriends}},[e._v("\n          Find friends\n        ")])]),e._v(" "),a("md-layout",{attrs:{flex:"100"}},[a("div",{staticClass:"input-container",staticStyle:{"margin-top":"20px"}},[a("label",[e._v("CHALLENGER")]),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.enemy,expression:"enemy"}],staticStyle:{cursor:"pointer"},attrs:{type:"text",readonly:e.isFindingAvatar,tabindex:"2"},domProps:{value:e.enemy},on:{input:function(t){t.target.composing||(e.enemy=t.target.value)}}})])])],1)],1),e._v(" "),a("md-dialog-alert",{ref:"dialogUserNotFound",attrs:{"md-content":e.alert.content,"md-ok-text":e.alert.ok},on:{open:e.onOpen,close:e.onClose}}),e._v(" "),a("div",{ref:"phaser",attrs:{id:"phaser"}},[e.showSpinner?a("div",{staticClass:"loading"},[e._v("Loadingâ€¦")]):e._e(),e._v(" "),a("div",{staticClass:"phaser-overlay"},[e.heroAvatar?a("div",{staticClass:"status hero"},[a("h1",[e._v(e._s(e.hero))]),e._v(" "),a("div",{staticClass:"hp",style:{width:e.heroAvatar.HP/e.heroAvatar.TOTAL_HP*331+"px"}},[e._m(0)]),e._v(" "),a("div",{staticClass:"info"},[e._v("\n          HP: "+e._s(e.heroAvatar.HP)+"\n          "),a("br"),e._v("\n          TOTAL HP: "+e._s(e.heroAvatar.HP)+"\n          "),a("br"),e._v("\n          MP: "+e._s(e.heroAvatar.MP)+"\n          "),a("br"),e._v("\n          P. ATCK: "+e._s(e.heroAvatar.P_ATCK)+"\n          "),a("br"),e._v("\n          P. DEF: "+e._s(e.heroAvatar.P_DEF)+"\n          "),a("br"),e._v("\n          SPEED: "+e._s(e.heroAvatar.SPEED)+"\n          "),a("br"),e._v("\n          CRITICAL: "+e._s(e.heroAvatar.CRITICAL)+"\n          "),a("br"),e._v("\n          ACCURACY: "+e._s(e.heroAvatar.ACCURACY)+"\n          "),a("br"),e._v("\n          STAMINA: "+e._s(e.heroAvatar.STAMINA)+"\n        ")])]):e._e(),e._v(" "),e.enemyAvatar?a("div",{staticClass:"status challenger"},[a("h1",[e._v(e._s(e.enemy))]),e._v(" "),a("div",{staticClass:"hp",style:{width:e.enemyAvatar.HP/e.enemyAvatar.TOTAL_HP*331+"px"}},[e._m(1)]),e._v(" "),a("div",{staticClass:"info"},[e._v("\n          HP: "+e._s(e.enemyAvatar.HP)+"\n          "),a("br"),e._v("\n          TOTAL HP: "+e._s(e.enemyAvatar.HP)+"\n          "),a("br"),e._v("\n          MP: "+e._s(e.enemyAvatar.MP)+"\n          "),a("br"),e._v("\n          P. ATCK: "+e._s(e.enemyAvatar.P_ATCK)+"\n          "),a("br"),e._v("\n          P. DEF: "+e._s(e.enemyAvatar.P_DEF)+"\n          "),a("br"),e._v("\n          SPEED: "+e._s(e.enemyAvatar.SPEED)+"\n          "),a("br"),e._v("\n          CRITICAL: "+e._s(e.enemyAvatar.CRITICAL)+"\n          "),a("br"),e._v("\n          ACCURACY: "+e._s(e.enemyAvatar.ACCURACY)+"\n          "),a("br"),e._v("\n          STAMINA: "+e._s(e.enemyAvatar.STAMINA)+"\n        ")])]):e._e()])]),e._v(" "),a("div",{staticStyle:{width:"900px",display:"inline-flex"}},[e.isFindingAvatar?e._e():a("div",{attrs:{id:"scroll"}},e._l(e.friends,function(t){return a("a",{key:t.login,staticStyle:{"padding-left":"2%"},attrs:{onclick:"window.scrollTo(0, 0)"}},[a("img",{staticStyle:{"border-radius":"50%",width:"10%","padding-bottom":"1%","margin-top":"1%",cursor:"pointer"},attrs:{src:t.image,name:t.login,alt:"item.login",title:t.login},on:{click:function(a){e.enemy=t.login}}})])}))])],1)},staticRenderFns:[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"hp-background"},[a("div",{staticClass:"hp-begin"}),e._v(" "),a("div",{staticClass:"hp-middle"}),e._v(" "),a("div",{staticClass:"hp-end"})])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"hp-background"},[a("div",{staticClass:"hp-begin"}),e._v(" "),a("div",{staticClass:"hp-middle"}),e._v(" "),a("div",{staticClass:"hp-end"})])}]}},52:function(e,t,a){"use strict";var n=a(9),i=a(129),r=a(124),s=a.n(r);n.default.use(i.a),t.a=new i.a({routes:[{path:"/",name:"Hello",component:s.a}]})},53:function(e,t,a){a(117);var n=a(28)(a(74),a(126),null,null);e.exports=n.exports},72:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(9),i=a(53),r=a.n(i),s=a(52);n.default.config.productionTip=!1,new n.default({el:"#app",router:s.a,template:"<App/>",components:{App:r.a}})},73:function(e,t){t.calculate=function(e){function t(){return 0===c.organizations?1:c.organizations>=5?5:c.organizations}function a(){return c.stars>1e3?1e3:c.stars}function n(){return c.following>1e3?1e3:c.following}function i(){return o.stars>=4?o.stars/2:1}function r(){return o.forks>=4?o.forks/2:1}function s(){return 0===o.repositories.relevants.length?1:o.repositories.relevants.length}var o=e.repository,h=e.currentStreak,c=e.information,l=function(){return(c.commits+h)*c.commitsAverage+(c.followers+n()+a())}(),u=function(){return(c.commits+h)*c.commitsAverage}(),m=function(){return(r()+i()+o.repositories.full.length+c.commits)*s()+2*c.commits}(),d=function(){return(r()+c.followers+n()+i()+o.repositories.full.length)*s()+c.commits*c.commitsAverage}(),f=function(){return(c.commits+h)*t()}(),v=function(){return(c.commits+h+c.followers+n())*t()}(),p=function(){return(c.followers+n())*(t()*c.commitsAverage*s())+c.commits+h}(),g=function(){return c.commits*c.commitsAverage}();return{HP:parseInt(l),TOTAL_HP:parseInt(l),MP:parseInt(u),P_ATCK:parseInt(m),P_DEF:parseInt(d),SPEED:parseInt(f),CRITICAL:parseInt(v),ACCURACY:parseInt(p),STAMINA:parseInt(g)}}},74:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={name:"app"}},75:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(80),i=a.n(n),r=a(79),s=a.n(r),o=a(29),h=(a.n(o),a(31)),c=(a.n(h),a(30)),l=a.n(c),u=a(54),m=a.n(u),d=a(9),f=a(128),v=a.n(f),p=a(73),g=a.n(p);d.default.use(v.a),t.default={name:"game",props:{width:{default:888,type:Number},height:{default:656,type:Number}},mounted:function(){this.showSpinner=!0;var e=this;null===this.game&&(this.game=new l.a.Game(this.width,this.height,l.a.AUTO,this.$refs.phaser,{preload:function(){e.preload(this)},create:function(){e.create(this)},update:function(){e.update(this)}}))},methods:{openDialog:function(e){this.$refs[e].open()},closeDialog:function(e){this.$refs[e].close()},onOpen:function(){console.log("Opened")},onClose:function(e){console.log("Closed",e)},findFriends:function(){var e=this;this.showSpinner=!0,m.a.get("/api/friends?username="+this.hero).then(function(t){e.showSpinner=!1,e.friends=t.data.map(function(e){return{login:e.login,image:e.avatar_url}}),window.scrollBy(0,window.innerHeight)}).catch(function(t){e.showInformation(e.hero),e.hero=null,e.showSpinner=!1})},animateBaseHero:function(e){var t=this.heroChar.animations.add("walk",e,10,!0);t.enableUpdate=!0,t.onUpdate.add(this.onHeroUpdate,this),this.heroChar.animations.play("walk",this.calculateSpeed().hero,!0)},animateBaseEnemy:function(e){var t=this.enemyChar.animations.add("walk",e,10,!0);t.enableUpdate=!0,t.onUpdate.add(this.onEnemyUpdate,this),this.enemyChar.animations.play("walk",this.calculateSpeed().enemy,!0)},calculateSpeed:function(){var e=this.heroAvatar.SPEED,t=this.enemyAvatar.SPEED;return{hero:e>t?5:4,enemy:t>e?5:4}},getHeroCharByLanguage:function(e){var t=this,a={java:function(){t.createHeroAnimatioBase({scale:1,width:t.width-750,height:t.height-400,frameImage:"tanker-java"}),t.animateBaseHero(t.getJavaFrame())},"c#":function(){t.createHeroAnimatioBase({scale:-1,width:t.width-370,height:t.height-180,frameImage:"atacker-c#"}),t.animateBaseHero(t.getCSharpFrame())},javascript:function(){t.createHeroAnimatioBase({scale:-1,width:t.width-460,height:t.height-255,frameImage:"archer-javascript"}),t.animateBaseHero(t.getJavaScriptFrame())},ruby:function(){t.createHeroAnimatioBase({scale:1,width:t.width-620,height:t.height-255,frameImage:"bau-ruby"}),t.animateBaseHero(t.getRubyFrame())}},n=function(){t.createHeroAnimatioBase({scale:-1,width:t.width-460,height:t.height-178,frameImage:"other"}),t.animateBaseHero(t.getOtherFrame())};return(a[e.toLocaleLowerCase()]||n)()},getEnemyCharByLanguage:function(e){var t=this,a={java:function(){t.createEnemyAnimatioBase({scale:-1,width:t.width-150,height:t.height-400,frameImage:"tanker-java"}),t.animateBaseEnemy(t.getJavaFrame())},"c#":function(){t.createEnemyAnimatioBase({scale:1,width:t.width-530,height:t.height-180,frameImage:"atacker-c#"}),t.animateBaseEnemy(t.getCSharpFrame())},javascript:function(){t.createEnemyAnimatioBase({scale:1,width:t.width-460,height:t.height-255,frameImage:"archer-javascript"}),t.animateBaseEnemy(t.getJavaScriptFrame())},ruby:function(){t.createEnemyAnimatioBase({scale:-1,width:t.width-250,height:t.height-255,frameImage:"bau-ruby"}),t.animateBaseEnemy(t.getRubyFrame())}},n=function(){t.createEnemyAnimatioBase({scale:1,width:t.width-460,height:t.height-178,frameImage:"other"}),t.animateBaseEnemy(t.getOtherFrame())};return(a[e.toLocaleLowerCase()]||n)()},getJavaFrame:function(){return[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27]},getCSharpFrame:function(){return[2,8,11,12,13,15,16,17,18,19,23,24,25,26,27,28,29,30,31,35,36,37,38]},getJavaScriptFrame:function(){return[16,17,18,19,20,29,30,29,30,31,21,22,23,24,25,26,27,36,37,38,39,40,41]},getRubyFrame:function(){return[2,3,4,5,6,22,7,8,17,18,9,1,2,3,4,5,6,22,7,8,17,18,9]},getOtherFrame:function(){return[7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29]},createHeroAnimatioBase:function(e){this.heroChar=this.game.add.sprite(e.width,e.height,e.frameImage),this.heroChar.scale.x*=e.scale},createEnemyAnimatioBase:function(e){this.enemyChar=this.game.add.sprite(e.width,e.height,e.frameImage),this.enemyChar.scale.x*=e.scale},punchHeroFrame:function(e){return this.frameMovement(this.heroApiResult,e)},punchEnemyFrame:function(e){return this.frameMovement(this.enemyApiResult,e)},frameMovement:function(e,t){var a={java:function(){return 10===t.index||24===t.index},"c#":function(){return 15===t.index||37===t.index},javascript:function(){return 39===t.index||40===t.index},ruby:function(){return 9===t.index}},n=function(){return 12===t.index||27===t.index};return(a[e.repository.language.toLocaleLowerCase()]||n)()},isTrueBattle:function(){return(this.heroAvatar||!1)&&(this.heroAvatar.HP||!1)&&this.isBattle},cleanBattle:function(){this.cleanBar(),this.enemyChar&&this.enemyChar.destroy(),this.heroChar&&this.heroChar.destroy(),this.heroName&&this.heroName.destroy(),this.enemyName&&this.enemyName.destroy()},preload:function(){this.showSpinner=!0,this.game.load.spritesheet("tanker-java","static/game/char/tanker-385x318.png",385,318,27),this.game.load.spritesheet("atacker-c#","static/game/char/paladin-249x100.png",249,100,39),this.game.load.spritesheet("archer-javascript","static/game/char/archer-158x173.png",158,173,46),this.game.load.spritesheet("other","static/game/char/wizard-161x106.png",161,106,36),this.game.load.spritesheet("bau-ruby","static/game/pet/bau-231x172.png",213,172,24),this.game.load.image("background","static/game/img/background.v1.png")},create:function(e){this.game.add.tileSprite(0,0,1300,700,"background"),this.showSpinner=!1},update:function(e){},onHeroUpdate:function(e,t){this.isTrueBattle()&&this.punchHeroFrame(t)&&(console.log("hero punch",t.index),this.createHeroBattle(),this.updateAvatarBar())},onEnemyUpdate:function(e,t){this.isTrueBattle()&&this.punchEnemyFrame(t)&&(console.log("enemy punch",t.index),this.createEnemyBattle(),this.updateAvatarBar())},createHeroBattle:function(){this.enemyAvatar.HP-=this.createBattleSystem(this.heroAvatar),this.verifyWinner()},createEnemyBattle:function(){this.heroAvatar.HP-=this.createBattleSystem(this.enemyAvatar),this.verifyWinner()},createBattleSystem:function(e){var t=Math.floor(e.P_DEF/100),a=Math.round(e.ACCURACY/100),n=Math.round(e.STAMINA/100),i=Math.floor(100001*Math.random())<e.CRITICAL?2:1;return(Math.floor(e.P_ATCK/100)+t+Math.round(a+n/2))*i},verifyWinner:function(){this.enemyAvatar.HP<=0&&this.isBattle?(this.isBattle=!1,this.enemyAvatar.HP=0,this.isFindingAvatar=!1,this.heroAvatar.HP<=0&&(this.heroAvatar.HP=0),this.pauseBattle()):this.heroAvatar.HP<=0&&this.isBattle?(this.isBattle=!1,this.heroAvatar.HP=0,this.isFindingAvatar=!1,this.enemyAvatar.HP<=0&&(this.enemyAvatar.HP=0),this.pauseBattle()):this.isBattle=!0},pauseBattle:function(){this.heroChar.animations.paused=!0,this.enemyChar.animations.paused=!0},cleanBar:function(){this.heroText&&this.heroText.destroy(),this.enemyText&&this.enemyText.destroy()},updateAvatarBar:function(){this.cleanBar()},dealingWithLocale:function(e){var t=[],a=0;return e.forEach(function(e,n){var i=e.date,r=e.commit;new Date(e.date.replace("-","/")).getTime()<=(new Date).getTime()&&(r>0&&(a>0||0===t.length)?t.push({date:i,commit:r}):t=[]),a=e.commit}),t.length},showInformation:function(e){e&&(this.alert.content='Enemy "'+e+'" not found.',this.openDialog("dialogUserNotFound"),this.isFindingAvatar=!1,this.showSpinner=!1,this.isFindingAvatar=!1,this.friends=[])},find:function(){var e=this;this.showSpinner=!0,this.cleanBattle(),this.heroName=this.game.add.text(200,32,null,{font:"32px Arial",fill:"#FFE848"}),this.enemyName=this.game.add.text(this.width-400,32,null,{font:"32px Arial",fill:"#FFE848"}),this.isFindingAvatar=!0;var t=m.a.get("/api/repository/format?username="+this.hero).then(function(e){return e.data}).catch(function(t){e.showInformation(e.hero),e.hero=null}),a=m.a.get("/api/repository/format?username="+this.enemy).then(function(e){return e.data}).catch(function(t){e.showInformation(e.enemy),e.enemy=null}),n=m.a.get("/api/user/full?username="+this.hero).then(function(e){return e.data}).catch(function(t){e.showInformation(e.hero),e.hero=null}),r=m.a.get("/api/user/full?username="+this.enemy).then(function(e){return e.data}).catch(function(t){e.showInformation(e.enemy),e.enemy=null}),o=m.a.get("/api/streak/full?username="+this.hero).then(function(t){return e.dealingWithLocale(t.data)}).catch(function(t){e.showInformation(e.hero),e.hero=null}),h=m.a.get("/api/streak/full?username="+this.enemy).then(function(t){return e.dealingWithLocale(t.data)}).catch(function(t){e.showInformation(e.enemy),e.enemy=null});s.a.all([t,n,o,a,r,h]).then(function(t){var a=i()(t,6),n=a[0],r=a[1],s=a[2],o=a[3],h=a[4],c=a[5],l={repository:n,information:r,currentStreak:s};e.heroApiResult=l;var u={repository:o,information:h,currentStreak:c};e.enemyApiResult=u,e.heroAvatar=g.a.calculate(l),e.enemyAvatar=g.a.calculate(u),e.getHeroCharByLanguage(n.language),e.getEnemyCharByLanguage(o.language),e.isBattle=!0,e.updateAvatarBar(),e.showSpinner=!1})}},destroyed:function(){this.game.destroy()},data:function(){return{game:null,heroName:null,enemyName:null,heroAvatar:null,enemyAvatar:null,hero:"",enemy:"",heroText:null,enemyText:null,isBattle:!1,isFindingAvatar:!1,heroChar:null,heroPetChar:null,enemyPetChar:null,enemyChar:null,heroApiResult:null,enemyApiResult:null,friends:null,showSpinner:!1,alert:{content:"inital",ok:"Close"}}},watch:{view:function(e){var t=this;this.$nextTick(function(){t.game.update()})}}}},76:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(123),i=a.n(n);t.default={name:"hello",components:{Game:i.a},data:function(){return{}}}}},[72]);
//# sourceMappingURL=app.1831cb62f9879c48c26a.js.map